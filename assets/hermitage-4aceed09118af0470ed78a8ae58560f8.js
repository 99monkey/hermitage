(function(){var t,e,i,n,r,a,o,h,u,l,s,g,m,d,f,c,p,v,y,x,w,b,T,z,S,F,H,k,A,B,D,W,I;H="undefined"!=typeof exports&&null!==exports?exports:this,H.hermitage={looped:!0,preloadNeighbours:!0,slideshowEffect:"slide","default":{styles:{zIndex:10,position:"fixed",top:0,left:0,width:"100%",height:"100%"}},darkening:{"default":{attributes:{id:"overlay"},styles:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"#000"}},styles:{},opacity:.85},navigationButtons:{"default":{attributes:{},styles:{position:"absolute",width:"50px",height:"100%",top:0,cursor:"pointer",color:"#FAFAFA",fontSize:"30px",fontFamily:"Tahoma,Arial,Helvetica,sans-serif",textAlign:"center",verticalAlign:"middle"}},enabled:!0,styles:{},next:{"default":{attributes:{id:"navigation-right"},styles:{right:0}},styles:{},text:"▶"},previous:{"default":{attributes:{id:"navigation-left"},styles:{left:0}},styles:{},text:"◀"}},closeButton:{"default":{attributes:{id:"close-button"},styles:{position:"absolute",top:0,right:0,color:"#FFF",fontSize:"30px",fontFamily:"Tahoma,Arial,Helvetica,sans-serif",whiteSpace:"nowrap",cursor:"pointer"}},styles:{},enabled:!0,text:"×"},image:{"default":{attributes:{"class":"current"},styles:{cursor:"pointer",maxWidth:"none"}},styles:{}},bottomPanel:{"default":{attributes:{"class":"bottom-panel"},styles:{position:"absolute",bottom:0,height:"70px"}},styles:{},text:{"default":{attributes:{"class":"text"},styles:{width:"100%",height:"100%",textAlign:"center",color:"#FAFAFA"}},styles:{}}},loaderTimer:void 0,loader:{"default":{attributes:{"class":"loader"},styles:{}},styles:{},image:"/hermitage/assets/hermitage-loader-c3aa896ceed9c5be8aad26762fd1ebf8.gif",timeout:100},minimumSize:{width:100,height:100},animationDuration:400,images:[],resizeTimeout:100,resizeTimer:void 0,init:function(){return 0===$("#hermitage").length&&$("<div>").attr("id","hermitage").css(hermitage["default"].styles).hide().appendTo($("body")),hermitage.images.length=0,$.each($('a[rel="hermitage"]'),function(){return t($(this).attr("href"),$(this).attr("title"))}),$('a[rel="hermitage"]').click(function(t){return z(this),t.preventDefault()}),$(window).resize(function(){return hermitage.resizeTimer&&clearTimeout(hermitage.resizeTimer),hermitage.resizeTimer=setTimeout(function(){return n(!0)},hermitage.resizeTimeout)})}},t=function(t,e){var i;return i={source:t,text:e,loaded:!1},hermitage.images.push(i)},w=function(t){var e,i,n;return n="IMG"===$(t).prop("tagName")?$(t).attr("src"):$(t).attr("href"),e=function(){var t,e,r,a;for(r=hermitage.images,a=[],t=0,e=r.length;e>t;t++)i=r[t],i.source===n&&a.push(i);return a}()[0],hermitage.images.indexOf(e)},x=function(t){return hermitage.images[t]},W=function(t){return x(t).source},I=function(t){return x(t).text},$.fn.applyStyles=function(t,e,i){return null==i&&(i=void 0),e?this.animate(t,{duration:hermitage.animationDuration,queue:!1,complete:i}):this.css(t)},$.fn.center=function(t,e,i,n,r){var a;return null==t&&(t=!1),null==e&&(e=0),null==i&&(i=0),null==n&&(n=0),null==r&&(r=0),this.css("position","absolute"),0===e&&(e=$(this).outerWidth()),0===i&&(i=$(this).outerHeight()),a={top:""+Math.max(0,($("#overlay").outerHeight()-i)/2+r)+"px",left:""+Math.max(0,($("#overlay").outerWidth()-e)/2+n)+"px"},this.applyStyles(a,t)},$.fn.setSize=function(t,e,i){var n;return null==i&&(i=!1),n={width:t,height:e},this.applyStyles(n,i)},$.fn.maximizeLineHeight=function(t){var e;return null==t&&(t=!1),e={lineHeight:""+this.outerHeight()+"px"},this.applyStyles(e,t)},$.fn.showFromRight=function(t,e,i,n){return null==t&&(t=0),null==e&&(e=0),null==i&&(i=0),null==n&&(n=0),this.css({left:""+$("#overlay").width()+"px"}),this.show(),this.center(!0,t,e,i,n)},$.fn.showFromLeft=function(t,e,i,n){return null==t&&(t=0),null==e&&(e=0),null==i&&(i=0),null==n&&(n=0),this.css({left:""+-$(this).outerWidth()+"px"}),this.show(),this.center(!0,t,e,i,n)},$.fn.hideToRight=function(t){var e;return null==t&&(t=void 0),e={left:""+$("#overlay").width()+"px"},this.applyStyles(e,!0,t)},$.fn.hideToLeft=function(t){var e;return null==t&&(t=void 0),e={left:""+-$(this).outerWidth()+"px"},this.applyStyles(e,!0,t)},m=function(t,e){return t.attr(e["default"].attributes).css(e["default"].styles).css(e.styles)},g=function(){return m($("<div>"),hermitage.darkening).css("opacity",hermitage.darkening.opacity).css("filter","alpha(opacity='"+100*hermitage.darkening.opacity+"')").appendTo($("#hermitage")).hide().fadeIn().click(u)},c=function(){return m($("<div>"),hermitage.navigationButtons).appendTo($("#hermitage")).hide().maximizeLineHeight()},p=function(){return m(c(),hermitage.navigationButtons.next).text(hermitage.navigationButtons.next.text).click(B)},d=function(){return m(c(),hermitage.navigationButtons.previous).text(hermitage.navigationButtons.previous.text).click(D)},s=function(){return m($("<div>"),hermitage.closeButton).appendTo($("#hermitage")).hide().text(hermitage.closeButton.text).click(u)},l=function(){var t;return t=m($("<div>"),hermitage.bottomPanel).appendTo($("#hermitage")).hide(),m($("<div>"),hermitage.bottomPanel.text).appendTo(t)},f=function(){return b(hermitage.loader.image,function(){return m($("<img>"),hermitage.loader).attr("src",hermitage.loader.image).appendTo($("#hermitage")).hide().center()})},h=function(){return hermitage.loaderTimer?clearTimeout(hermitage.loaderTimer):void 0},A=function(){return h(),hermitage.loaderTimer=setTimeout(function(){return $("#hermitage .loader").show()},hermitage.loader.timeout)},y=function(){return h(),$("#hermitage .loader").hide()},z=function(t){return $("#hermitage").empty().show(),g(),p(),d(),s(),l(),f(),k(w(t))},k=function(t,e){var i;return null==e&&(e=void 0),A(),i=m($("<img />"),hermitage.image).attr("src",W(t)).hide().appendTo($("#hermitage")),i.click(function(t){return t.pageX>=$(window).width()/2?B():D()}),n(!1,i,e),S(t)},B=function(){var t,e,i;if(t=$("img.current"),1===t.length){if(i=w(t),!a(i))return;return e="slide"===hermitage.slideshowEffect?"left":void 0,v(e),e="slide"===hermitage.slideshowEffect?"right":void 0,k(T(i),e)}},D=function(){var t,e,i;if(t=$("img.current"),1===t.length){if(i=w(t),!o(i))return;return e="slide"===hermitage.slideshowEffect?"right":void 0,v(e),e="slide"===hermitage.slideshowEffect?"left":void 0,k(F(i),e)}},v=function(t){var e,i;return null==t&&(t=void 0),i=$("img.current"),1===i.length?(e=function(){return i.remove()},"right"===t?i.hideToRight(e):"left"===t?i.hideToLeft(e):i.fadeOut(hermitage.animationDuration,e)):void 0},u=function(){return $("#hermitage :not(#overlay)").fadeOut(),$("#overlay").fadeOut(hermitage.animationDuration,function(){return $("#hermitage").hide().empty()})},n=function(t,n,a){var o;return null==t&&(t=!1),null==n&&(n=void 0),null==a&&(a=void 0),void 0!==n||(n=$("#hermitage img.current"),1===n.length)?(o=w(n),b(W(o),function(){var h,u,l,s,g;return x(o).loaded=!0,l=0,u=$(window).width()-$("#navigation-left").outerWidth()-$("#navigation-right").outerWidth(),h=$(window).height(),g=I(o),g&&(l=-$("#hermitage .bottom-panel").outerHeight()/2,h-=$("#hermitage .bottom-panel").outerHeight()),$("#hermitage .bottom-panel .text").text(g||""),(u<=hermitage.minimumSize.width||h<=hermitage.minimumSize.height)&&(h>u?(u=hermitage.minimumSize.width,h=u*(this.height/this.width)):(h=hermitage.minimumSize.height,u=h*(this.width/this.height))),s=1,(this.width>u||this.height>h)&&(s=Math.min(u/this.width,h/this.height)),n.setSize(this.width*s,this.height*s,t).center(t,this.width*s,this.height*s,0,l),"right"===a?n.showFromRight(this.width*s,this.height*s,0,l):"left"===a?n.showFromLeft(this.width*s,this.height*s,0,l):n.fadeIn(hermitage.animationDuration),y(),r(t,n),i(t,n),e(t),$("#hermitage .loader").center()})):void 0},r=function(t,e){var i,n,r,h;if(hermitage.navigationButtons.enabled)return h=$("#hermitage #navigation-left"),r=$("#hermitage #navigation-right"),h.maximizeLineHeight(t),r.maximizeLineHeight(t),i=w(e),n=hermitage.animationDuration,o(i)?h.fadeIn(n):h.fadeOut(n),a(i)?r.fadeIn(n):r.fadeOut(n)},i=function(){var t;if(hermitage.closeButton.enabled)return t=$("#hermitage #close-button"),"none"===t.css("display")?t.fadeIn(hermitage.animationDuration):void 0},e=function(t){var e,i;return e=$("#hermitage .bottom-panel"),""===e.text()?e.fadeOut(hermitage.animationDuration):(i={width:""+($(window).width()-$("#navigation-left").outerWidth()-$("#navigation-right").outerWidth())+"px",left:""+($("#navigation-left").position().left+$("#navigation-left").outerWidth())+"px"},t?e.animate(i,{duration:hermitage.animationDuration,queue:!1}):e.css(i),e.fadeIn(hermitage.animationDuration))},a=function(t){return hermitage.images.length<2?!1:t<hermitage.images.length-1?!0:hermitage.looped},o=function(t){return hermitage.images.length<2?!1:t>0?!0:hermitage.looped},S=function(t){var e,i;if(hermitage.preloadNeighbours)return e=T(t),i=F(t),a(t)&&!x(e).loaded&&b(W(e),function(){return x(e).loaded=!0}),o(t)&&!x(i).loaded?b(W(i),function(){return x(i).loaded=!0}):void 0},b=function(t,e){return $("<img />").attr("src",t).load(e)},T=function(t){return t<hermitage.images.length-1?t+1:0},F=function(t){return t>0?t-1:hermitage.images.length-1},$(document).ready(hermitage.init),$(document).on("page:change",hermitage.init)}).call(this);